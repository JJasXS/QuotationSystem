@model QuotationSystem.Pages.ChatModel

<div id="chatContent">
    @if (Model.Step == "AskSearchMode")
    {
        <div class="bot-msg"><strong>Bot:</strong> Do you want to search by Category (StockGroup) or by Name (Description)?</div>
        <div class="bot-options">
            @foreach (var option in Model.BotOptions ?? new List<string> { "StockGroup", "Description" })
            {
                <button type="button" class="option-btn" onclick="addUserBubble('@option'); ajaxChatGet('ChooseMode', {SelectedMode:'@option'})">@option</button>
            }
        </div>
    }
    // ...category selection bubble fully removed...
    else if (Model.Step == "AskKeyword")
    {
        <div class="bot-msg"><strong>Bot:</strong> Please enter a keyword for item name:</div>
        <div class="bot-options">
            <form id="enterKeywordForm" class="chat-form" onsubmit="event.preventDefault(); ajaxChatKeyword();">
                <input type="text" name="Keyword" id="KeywordInput" value="" autocomplete="off" placeholder="Type keyword..." required />
                <button type="button" onclick="ajaxChatKeyword()">Search</button>
            </form>
        </div>
    }
    else if (Model.Step == "ShowProducts")
    {
        <div class="bot-msg"><strong>Bot:</strong> Top matches:</div>
        <ul>
            @foreach (var p in Model.Products)
            {
                <li>@p.Code - @p.Description (@p.StockGroup) Price: @(p.StockValue.HasValue ? p.StockValue.Value.ToString("F2") : "not set")</li>
            }
        </ul>
    }
</div>
